@if (showHeader) {
  <app-breadcrumb [breadcrumbItems]="steps"></app-breadcrumb>
  <app-titles-subtitles
          [title]="'Registros Históricos'"
          [subtitle]="
      'Accedé al historial completo de los reportes generados por sucursal.'
    ">
  </app-titles-subtitles>
}

<div class="mt-6 bg-white rounded-3xl shadow-sm p-6">
  @if (showHeader) {
    <div class="flex flex-col gap-1 mb-4">
      <h3 class="text-lg font-semibold text-gray-900">Historial de evaluaciones</h3>
      <p class="text-sm text-gray-500">
        Consulta todas las órdenes evaluadas con su estado actual.
      </p>
    </div>
  }

  <p-table
    [value]="reports"
    class="rounded-2xl overflow-hidden border border-gray-100"
    [loading]="loading"
    [tableStyle]="{ 'min-width': '100%' }"
  >
    <ng-template pTemplate="header">
      <tr class="bg-gray-50">
        <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">GDA</th>
        <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Tipo de batería</th>
        <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Cliente</th>
        <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Fecha de evaluación</th>
        <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Estado</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-report>
      <tr class="hover:bg-gray-50">
        <td class="px-4 py-3 text-sm text-gray-900">{{ report.odt }}</td>
        <td class="px-4 py-3 text-sm text-gray-700">{{ report.batteryType }}</td>
        <td class="px-4 py-3 text-sm text-gray-700">{{ report.client }}</td>
        <td class="px-4 py-3 text-sm text-gray-700">{{ report.evaluationDate }}</td>
        <td class="px-4 py-3">
          <p-tag [value]="report.status" [severity]="report.severity"></p-tag>
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="5" class="text-center text-sm text-gray-500 py-6">
          No se encontraron registros históricos.
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>