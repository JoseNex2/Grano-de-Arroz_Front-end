<div class="w-full max-w-5xl mx-auto bg-white rounded-2xl p-8 md:p-10" [formGroup]="form">
  <!-- Título y subtítulo -->
  <app-titles-subtitles
    [title]="'Asociar batería'"
    [subtitle]="'Asociar la batería al cliente ' + (clientFullName || 'seleccionado') + '. Complete los datos requeridos.'">
  </app-titles-subtitles>


  <!-- Contenido en 2 columnas -->
  <div class="grid grid-cols-1 md:grid-cols-12 gap-8 items-start">
    <!-- Ilustración -->
    <div class="md:col-span-5 flex flex-col items-center md:items-start gap-4">
      <img
        src="images/assign-battery/assign-battery.svg"
        alt="Asociar batería"
        class="w-64 h-64 object-contain opacity-90"
      />
      <!-- Cliente (solo visual) -->
      <div *ngIf="clientFullName" class="bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 text-sm text-gray-700 flex items-center gap-2 w-full">
        <i class="pi pi-user text-gray-500"></i>
        <span class="font-medium">Cliente:</span>
        <span class="truncate">{{ clientFullName }}</span>
      </div>
    </div>

    <!-- Formulario -->
    <div class="md:col-span-7">
      <div class="flex flex-col gap-6">
        <!-- Número de GDA -->
        <div>
          <label class="block mb-2 text-gray-800 font-semibold">Número de GDA / Chip ID <span class="text-red-500">*</span></label>
          <input
            type="text"
            pInputText
            placeholder="Ingresa el número que trae la batería"
            formControlName="ChipId"
            class="w-full"
          />
          <small *ngIf="form.get('ChipId')?.invalid && form.get('ChipId')?.touched" class="text-red-500 text-xs">Campo obligatorio</small>
        </div>

        <!-- OT -->
        <div>
          <label class="block mb-2 text-gray-800 font-semibold">OT / Orden de trabajo</label>
          <input
            type="text"
            pInputText
            placeholder="Orden de trabajo"
            formControlName="Ot"
            class="w-full"
          />
        </div>

        <!-- Fecha de venta -->
        <div>
          <label class="block mb-2 text-gray-800 font-semibold">Fecha de venta</label>
          <p-datepicker
            placeholder="Ej: 06/09/2025"
            [showIcon]="true"
            appendTo="body"
            formControlName="SaleDate"
            class="w-full"
          ></p-datepicker>
          <small *ngIf="form.get('SaleDate')?.invalid && form.get('SaleDate')?.touched" class="text-red-500 text-xs">Seleccione una fecha</small>
        </div>

        <!-- Acciones -->
        <div class="grid grid-cols-2 gap-6 pt-2">
          <p-button
            label="Cancelar"
            severity="secondary"
            outlined="true"
            (onClick)="onCancel()"
            styleClass="w-full"
          ></p-button>

          <p-button
            label="Añadir"
            [disabled]="loading || form.invalid"
            [loading]="loading"
            (onClick)="onSubmit()"
            styleClass="w-full"
          ></p-button>
        </div>
        <p *ngIf="form.invalid && (form.touched || form.dirty)" class="text-xs text-gray-500">Complete los campos marcados con * para habilitar el envío.</p>
      </div>
    </div>
  </div>
</div>
